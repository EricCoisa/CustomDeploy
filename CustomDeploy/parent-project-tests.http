### Teste do Campo ParentProject

# Obter token
POST https://localhost:7071/auth/login
Content-Type: application/json

{
    "username": "admin",
    "password": "password"
}

###

# Listar todas as publicações (agora com campo parentProject)
GET https://localhost:7071/deploy/publications
Authorization: Bearer {{auth_token}}

###

# Criar deploy no nível raiz (parentProject deve ser null)
POST https://localhost:7071/deploy
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
    "repoUrl": "https://github.com/microsoft/vscode-website.git",
    "branch": "main",
    "buildCommand": "echo 'Build root level'",
    "buildOutput": ".",
    "targetPath": "app-root-level"
}

###

# Criar deploy em subdiretório (parentProject deve ser "projeto-pai")
POST https://localhost:7071/deploy
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
    "repoUrl": "https://github.com/facebook/react.git",
    "branch": "main", 
    "buildCommand": "echo 'Build subdirectory'",
    "buildOutput": ".",
    "targetPath": "projeto-pai/api"
}

###

# Criar outro deploy no mesmo projeto pai
POST https://localhost:7071/deploy
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
    "repoUrl": "https://github.com/vercel/next.js.git",
    "branch": "canary",
    "buildCommand": "echo 'Build frontend'", 
    "buildOutput": ".",
    "targetPath": "projeto-pai/frontend"
}

###

# Criar deploy com múltiplos níveis (parentProject deve ser "microservices")
POST https://localhost:7071/deploy
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
    "repoUrl": "https://github.com/nodejs/node.git",
    "branch": "main",
    "buildCommand": "echo 'Build deep nested'",
    "buildOutput": ".",
    "targetPath": "microservices/auth/api"
}

###

# Verificar publicações após criação
GET https://localhost:7071/deploy/publications
Authorization: Bearer {{auth_token}}

###

# Obter deploy individual para verificar campo parentProject
GET https://localhost:7071/deploy/publications/projeto-pai-api
Authorization: Bearer {{auth_token}}

###

# Obter metadados de deploy específico
GET https://localhost:7071/deploy/publications/projeto-pai-api/metadata
Authorization: Bearer {{auth_token}}

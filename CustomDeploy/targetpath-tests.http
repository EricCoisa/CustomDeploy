# Testes de Validação de TargetPath

## 1. Login para obter token JWT
POST http://localhost:5092/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "password"
}

### 2. Deploy VÁLIDO - Caminho relativo simples
POST http://localhost:5092/deploy
Content-Type: application/json
Authorization: Bearer YOUR_JWT_TOKEN

{
  "repoUrl": "https://github.com/octocat/Hello-World.git",
  "branch": "master",
  "buildCommand": "echo 'Build válido' && mkdir dist && echo 'Hello!' > dist/index.html",
  "buildOutput": "dist",
  "targetPath": "hello-world-valido"
}

### 3. Deploy VÁLIDO - Subpasta permitida
POST http://localhost:5092/deploy
Content-Type: application/json
Authorization: Bearer YOUR_JWT_TOKEN

{
  "repoUrl": "https://github.com/octocat/Hello-World.git",
  "branch": "master", 
  "buildCommand": "echo 'Build em subpasta' && mkdir dist && echo 'Hello Subpasta!' > dist/index.html",
  "buildOutput": "dist",
  "targetPath": "projetos/meu-app"
}

### 4. Deploy INVÁLIDO - Tentativa de path absoluto
POST http://localhost:5092/deploy
Content-Type: application/json
Authorization: Bearer YOUR_JWT_TOKEN

{
  "repoUrl": "https://github.com/octocat/Hello-World.git",
  "branch": "master",
  "buildCommand": "echo 'Build perigoso'",
  "buildOutput": "dist",
  "targetPath": "C:\\Windows\\System32\\malware"
}

### 5. Deploy INVÁLIDO - Tentativa de path traversal
POST http://localhost:5092/deploy
Content-Type: application/json
Authorization: Bearer YOUR_JWT_TOKEN

{
  "repoUrl": "https://github.com/octocat/Hello-World.git",
  "branch": "master",
  "buildCommand": "echo 'Tentativa de escape'",
  "buildOutput": "dist", 
  "targetPath": "../../Windows/malware"
}

### 6. Deploy INVÁLIDO - Barra inicial
POST http://localhost:5092/deploy
Content-Type: application/json
Authorization: Bearer YOUR_JWT_TOKEN

{
  "repoUrl": "https://github.com/octocat/Hello-World.git",
  "branch": "master",
  "buildCommand": "echo 'Path com barra inicial'",
  "buildOutput": "dist",
  "targetPath": "/etc/passwd"
}

### 7. Verificar publicações após testes
GET http://localhost:5092/deploy/publications
Authorization: Bearer YOUR_JWT_TOKEN
